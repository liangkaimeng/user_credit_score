# 客户评分卡模型

## 数据来源

　　数据来源于kaggle，链接：https://www.kaggle.com/c/GiveMeSomeCredit，字段解释如下：

| 标号 |                             字段标签 | 字段解释                  |
| :--: | -----------------------------------: | ------------------------- |
|  y   |                     SeriousDlqin2yrs | 好坏客户                  |
|  x1  | RevolvingUtilizationOfUnsecuredLines | 无担保放款的循环利用      |
|  x2  |                                  age | 借款人借款时的年龄        |
|  x3  | NumberOfTime30-59DaysPastDueNotWorse | 30-59天逾期但不糟糕的次数 |
|  x4  |                            DebtRatio | 负债比率                  |
|  x5  |                        MonthlyIncome | 月收入                    |
|  x6  |      NumberOfOpenCreditLinesAndLoans | 开放式信贷和贷款数量      |
|  x7  |              NumberOfTimes90DaysLate | 90天逾期次数              |
|  x8  |         NumberRealEstateLoansOrLines | 不动产贷款或额度数量      |
|  x9  | NumberOfTime60-89DaysPastDueNotWorse | 60-89天逾期但不糟糕次数   |
| x10  |                   NumberOfDependents | 家属数量                  |



## 数据探索

### 数据概况

#### 训练集

| 字段 | 字段类型 | 数据量 | 缺失率 | 唯一值 |
| ---: | -------: | -----: | -----: | -----: |
|   Id |    int64 | 150000 |  0.00% | 150000 |
|    y |    int64 | 150000 |  0.00% |      2 |
|   x1 |  float64 | 150000 |  0.00% | 125728 |
|   x2 |    int64 | 150000 |  0.00% |     86 |
|   x3 |    int64 | 150000 |  0.00% |     16 |
|   x4 |  float64 | 150000 |  0.00% | 114194 |
|   x5 |  float64 | 150000 | 19.82% |  13594 |
|   x6 |    int64 | 150000 |  0.00% |     58 |
|   x7 |    int64 | 150000 |  0.00% |     19 |
|   x8 |    int64 | 150000 |  0.00% |     28 |
|   x9 |    int64 | 150000 |  0.00% |     13 |
|  x10 |  float64 | 150000 |  2.62% |     13 |



#### 测试集

| 字段 | 字段类型 | 数据量 |  缺失率 | 唯一值 |
| ---: | -------: | -----: | ------: | -----: |
|   Id |    int64 | 101503 |   0.00% | 101503 |
|    y |  float64 | 101503 | 100.00% |      0 |
|   x1 |  float64 | 101503 |   0.00% |  85716 |
|   x2 |    int64 | 101503 |   0.00% |     82 |
|   x3 |    int64 | 101503 |   0.00% |     16 |
|   x4 |  float64 | 101503 |   0.00% |  79878 |
|   x5 |  float64 | 101503 |  19.81% |  11976 |
|   x6 |    int64 | 101503 |   0.00% |     56 |
|   x7 |    int64 | 101503 |   0.00% |     18 |
|   x8 |    int64 | 101503 |   0.00% |     24 |
|   x9 |    int64 | 101503 |   0.00% |     12 |
|  x10 |  float64 | 101503 |   2.59% |     13 |



### 描述性统计

#### 训练集

| 字段 |   计数 |   平均值 |   标准差 | 最小值 |      25% |      50% |       75% |     最大值 |
| ---: | -----: | -------: | -------: | -----: | -------: | -------: | --------: | ---------: |
|   id | 150000 | 75000.50 | 43301.41 |   1.00 | 37500.75 | 75000.50 | 112500.25 |  150000.00 |
|    y | 150000 |     0.07 |     0.25 |   0.00 |     0.00 |     0.00 |      0.00 |       1.00 |
|   x1 | 150000 |     6.05 |   249.76 |   0.00 |     0.03 | 0.154181 |      0.56 |   50708.00 |
|   x2 | 150000 |    52.30 |    14.77 |   0.00 |    41.00 |    52.00 |     63.00 |     109.00 |
|   x3 | 150000 |     0.42 |     4.19 |   0.00 |     0.00 |     0.00 |      0.00 |      98.00 |
|   x4 | 150000 |   353.01 |  2037.82 |   0.00 |     0.18 |     0.37 |      0.87 |  329664.00 |
|   x5 | 120269 |  6670.22 | 14384.67 |   0.00 |  3400.00 |  5400.00 |   8249.00 | 3008750.00 |
|   x6 | 150000 |     8.45 |     5.15 |   0.00 |     5.00 |     8.00 |     11.00 |      58.00 |
|   x7 | 150000 |     0.27 |     4.17 |   0.00 |     0.00 |     0.00 |      0.00 |      98.00 |
|   x8 | 150000 |     1.02 |     1.13 |   0.00 |     0.00 |     1.00 |      2.00 |      54.00 |
|   x9 | 150000 |     0.24 |     4.16 |   0.00 |     0.00 |     0.00 |      0.00 |      98.00 |
|  x10 | 146076 |     0.76 |     1.12 |   0.00 |     0.00 |     0.00 |      1.00 |      20.00 |

#### 测试集

| 字段 |   计数 |   平均值 |   标准差 | 最小值 |      25% |      50% |      75% |     最大值 |
| ---: | -----: | -------: | -------: | -----: | -------: | -------: | -------: | ---------: |
|   id | 101503 | 50752.00 | 29301.54 |   1.00 | 25376.50 | 50752.00 | 76127.50 |  101503.00 |
|    y |      0 |      NaN |      NaN |    NaN |      NaN |      NaN |      NaN |        NaN |
|   x1 | 101503 |     5.31 |   196.16 |   0.00 |     0.03 |     0.15 |     0.56 |   21821.00 |
|   x2 | 101503 |    52.41 |    14.78 |  21.00 |    41.00 |    52.00 |    63.00 |     104.00 |
|   x3 | 101503 |     0.45 |     4.54 |   0.00 |     0.00 |     0.00 |     0.00 |      98.00 |
|   x4 | 101503 |   344.48 |  1632.60 |   0.00 |     0.17 |     0.36 |     0.85 |  268326.00 |
|   x5 |  81400 |  6855.04 | 36508.60 |   0.00 |  3408.00 |  5400.00 |  8200.00 | 7727000.00 |
|   x6 | 101503 |     8.45 |     5.14 |   0.00 |     5.00 |     8.00 |    11.00 |      85.00 |
|   x7 | 101503 |     0.30 |     4.52 |   0.00 |     0.00 |     0.00 |     0.00 |      98.00 |
|   x8 | 101503 |     1.01 |     1.11 |   0.00 |     0.00 |     1.00 |     2.00 |      37.00 |
|   x9 | 101503 |     0.27 |     4.50 |   0.00 |     0.00 |     0.00 |     0.00 |      98.00 |
|  x10 |  98877 |     0.77 |     1.14 |   0.00 |     0.00 |     0.00 |     1.00 |      43.00 |



### 变量相关性

　　变量相关性可以用于消除特征冗余，同时可以过滤与目标值无关的变量。假设变量A与变量B完全正相关，意味着两个特征包含高度相似的信息，信息中几乎完全没有差异。

![heatmap](D:\liangkaimeng\picture\user_credit_score\heatmap.png)

　　*NumberOfTime30-59DaysPastDueNotWorse*与*NumberOfTimes90DaysLate*存在高度相关，*NumberOfTime30-59DaysPastDueNotWorse*与*NumberOfTime60-89DaysPastDueNotWorse*存在高度相关。



### 变量信息量

　　IV、基尼系数和信息熵，都是二分类算法中用于判断变量对目标的区分能力，IV多应用于逻辑回归算法的特征筛选，基尼系数和信息熵在树模型的运用比较普遍。IV值取值范围： IV < 0.02，无用特征；0.02 < IV < 0.1，弱价值特征；0.1 < IV < 0.3，中价值特征；0.3 < IV < 0.5，强价值特征，IV > 0.5，价值过高。

　　注：IV值仅有参考价值，不可以因为值过高而将其剔除，例如，猜一个人是否已经结婚，他/她的年龄的属于高IV值，能因为它高于0.5，就将该特征进行剔除？显然不可以。

|                                field |       iv |     gini |  entropy |   unique |
| -----------------------------------: | -------: | -------: | -------: | -------: |
| RevolvingUtilizationOfUnsecuredLines | 1.163142 | 0.116037 | 0.245387 | 125728.0 |
|              NumberOfTimes90DaysLate | 0.880725 | 0.110360 | 0.243960 |     19.0 |
| NumberOfTime30-59DaysPastDueNotWorse | 0.761485 | 0.122652 | 0.243960 |     16.0 |
| NumberOfTime60-89DaysPastDueNotWorse | 0.601348 | 0.119316 | 0.243960 |     13.0 |
|                                  age | 0.264446 | 0.123396 | 0.245383 |     86.0 |
|      NumberOfOpenCreditLinesAndLoans | 0.111157 | 0.124742 | 0.245387 |     58.0 |
|                            DebtRatio | 0.093587 | 0.124584 | 0.245387 | 114194.0 |
|                        MonthlyIncome | 0.093006 | 0.124267 | 0.245387 |  13595.0 |
|         NumberRealEstateLoansOrLines | 0.065721 | 0.124635 | 0.245386 |     28.0 |
|                   NumberOfDependents | 0.036456 | 0.124722 | 0.245366 |     14.0 |



### 数据分布







## 特征工程







## 模型搭建







## 模型评估









## 模型应用









<div style="page-break-after:always;"></div>

# 客户价值模型













# 层次分析法











<div style="page-break-after:always;"></div>

# 附录









